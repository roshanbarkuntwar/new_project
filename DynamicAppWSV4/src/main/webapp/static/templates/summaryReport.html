<ion-view cache-view="false" view-title="Summary Report">

    <ion-header-bar class="bar bar-header  App-header">
        <button class="button button-icon icon icon-left ion-ios-arrow-left back-btn" ng-click="backNavigate()"></button>
        <div class="h1 title">Report Analysis</div>
        <button class="button button-icon icon icon-right ion-ios-copy-outline"></button>
    </ion-header-bar>


    <ion-content class="has-header" on-swipe-right="backNavigate()">
        <div class="report-analysis-container-main">
            <div class="report-analysis-inner-sec" ng-repeat="item in graphTab">
                <!--<div class="row">
                    <div class="report-analysis-icon" ng-click="openReportAnalysis(item.seq_no,item.tab)" ng-if="item.first_screen_1_value==null">
                        <span class="report-analysis-icon-inner">
                              <img ng-src="data:image/jpeg;base64,{{item.dp}}">
                            </span>
                    </div>
                    <div class="report-analysis-icon-with-count" ng-click="openReportAnalysis(item.seq_no,item.tab)" ng-if="item.first_screen_1_value!=null">
                        <span class="report-analysis-icon-inner">
                              <b ng-init="item.status = true">{{item.first_screen_1_value}}</b>
                         </span>
                    </div>
                    <div class="report-analysis-heading">
                        <h2 ng-click="openReportAnalysis(item.seq_no,item.tab)">{{item.tab}}</h2>
                        <div class="last-login-details" ng-init="item.status = true" ng-if="firstScreen!='G'">
                            <h2 ng-show="!item.isProcessing" ng-click="refreshSummaryValue(item.seq_no,item.tab)">
                                <i class="icon ion-loop">   </i>&nbsp;&nbsp;
                                <a ng-if="item.lastupdate" style="color:#56bb81"> {{item.lastupdate}}</a>
                                <a ng-if="!item.lastupdate" style="color:#56bb81"> Please Refresh</a>

                            </h2>
                            <p>
                                <ion-spinner icon="bubbles" class="spinner-balanced" ng-show="item.isProcessing"></ion-spinner>
                            </p>
                        </div>
                    </div>
                </div>-->




                <div class="row" ng-click="openReportAnalysis(item.seq_no,item.tab)" ng-if="firstScreen =='G'">
                    <div class="report-analysis-icon" ng-if="item.first_screen_1_value==null">
                        <span class="report-analysis-icon-inner">
                              <img ng-src="data:image/jpeg;base64,{{item.dp}}">
                            </span>
                    </div>
                    <div class="report-analysis-icon-with-count" ng-if="item.first_screen_1_value!=null">
                        <span class="report-analysis-icon-inner">
                              <b ng-init="item.status = true">{{item.first_screen_1_value}}</b>
                            </span>
                    </div>
                    <div class="report-analysis-heading">
                        <h2>{{item.tab}}</h2>
                    </div>
                </div>


                <div ng-if="firstScreen !='G'">
                    <div class="row">
                        <div class="report-analysis-icon" ng-click="openReportAnalysis(item.seq_no,item.tab)" ng-if="item.first_screen_1_value==null">
                            <span class="report-analysis-icon-inner">
                              <img ng-src="data:image/jpeg;base64,{{item.dp}}">
                            </span>
                        </div>
                        <div class="report-analysis-icon-with-count" ng-click="openReportAnalysis(item.seq_no,item.tab)" ng-if="item.first_screen_1_value!=null">
                            <span class="report-analysis-icon-inner">
                              <b ng-init="item.status = true">{{item.first_screen_1_value}}</b>
                            </span>
                        </div>
                        <div class="report-analysis-heading">
                            <h2 ng-click="openReportAnalysis(item.seq_no,item.tab)">{{item.tab}}</h2>
                            <div class="last-login-details" ng-if="firstScreen!='G'" ng-init="item.status = false">
                                <div>
                                    <h2 ng-show="!item.isProcessing">
                                        <i class="icon ion-loop" >   </i>&nbsp;&nbsp;
                                        <a ng-if="item.lastupdate" style="color:#56bb81" > {{item.lastupdate}}</a>
                                        <a ng-if="!item.lastupdate" style="color:#56bb81" > Please Refresh</a>

                                    </h2>

                                    <p>
                                        <ion-spinner icon="bubbles" class="spinner-balanced" ng-show="item.isProcessing"></ion-spinner>
                                    </p>
                                </div>

                            </div>
                        </div>
                        <div>
                            <div class="toggle-form" ng-click="item.status=!item.status;openSlide(item.seq_no)" ng-hide="item.filter_Flag == 'F'">
                                <i class="icon ion-plus"></i>
                            </div>
                            <div class="toggle-form" ng-click="refreshSummaryValue(item.seq_no,item.tab)" ng-hide="item.filter_Flag != 'F'">
                                <i class="icon ion-loop"></i>
                            </div>
                        </div>
                    </div>
                    <div class="slide-toggle short-report-details-tab toggle-form-container-outer" ng-show="item.status">
                        <div>
                            <!--<ion-radio ng-model="choice" ng-value="'A'">Begining of year</ion-radio>
                                <ion-radio ng-model="choice" ng-value="'B'">Begining Of year</ion-radio>
                                <ion-radio ng-model="choice" ng-value="'C'">Begining of month</ion-radio>-->
                            <!--<ion-checkbox ng-model="filter.checkbox" ng-change>Begining of year</ion-checkbox>
                                <ion-checkbox ng-model="filter.checkbox" ng-change>Begining Of Qurter year</ion-checkbox>
                                <ion-checkbox ng-model="filter.checkbox" ng-change>Begining of month</ion-checkbox>-->
                            <!--ng-true-value="'{{box.text}}'"  ng-false-value="" -->

                            <!--filter.checkbox: <pre>{{checkBoxes}}</pre>-->
                        </div>
                        <!--
                        <div class="row">
                            <div class="col icon-left ion-ios-calendar positive" ng-model="date1" ion-datetime-picker date> From - {{date1| date: "dd-MM-yyyy"}}</div>
                            <div class="col icon-left ion-ios-calendar positive" ng-model="date2" ion-datetime-picker date> To - {{date2| date: "dd-MM-yyyy"}}</div>
                        </div>
-->

                        <div>
                            <form name="frm" ng-submit="item.status=!item.status; refreshSummaryValuePara(item.seq_no,item.tab,fields);">
                                <div class="toggle-form-container">
                                    <div ng-repeat="itemF in fields">
                                        <div ng-switch="itemF.item_help_property">

                                            <div ng-switch-when="R" ng-hide="itemF.entry_by_user=='F'">
                                                <!--<span class="input-label add-new-entry-label"><b>{{itemF.para_desc}}</b></span>-->
                                                <!--ng-repeat="box in itemF.group"-->
                                                <ion-checkbox data-ng-model="itemF.value" ng-change="toggleRadio(itemF.para_desc,itemF.para_column,itemF.dependent_row)" ng-disabled="itemF.disable">{{itemF.para_desc}} </ion-checkbox>
                                            </div>
                                            <div ng-switch-when="L" ng-hide="itemF.entry_by_user=='F'">
                                                <span class="input-label add-new-entry-label"><b>{{itemF.para_desc}}</b></span>
                                                <label class="item item-input">
                                                <input type="text" ng-model="itemF.value" id="{{itemF.column_name}}" placeholder="{{itemF.tool_tip}}" ng-click="openLov(itemF.para_desc,itemF.para_desc,itemF.dependent_row,itemF.dependent_row_logic, itemF.item_help_property)" ng-readonly="true" ng-required="itemF.nullable=='F'" disable="true" ng-disabled="itemF.entry_by_user=='R'" ng-change="dependent_nullable_logic(itemF.value,itemF.column_name)">
                                            </label>
                                            </div>
                                            <div ng-switch-when="M" ng-hide="itemF.entry_by_user=='F'">
                                                <span class="input-label add-new-entry-label"><b>{{itemF.para_desc}}</b></span>
                                                <label class="item item-input">
                                                <input type="text" id="{{itemF.column_name}}" ng-model="itemF.value" placeholder="{{itemF.tool_tip}}" disable="true" ng-click="itemF.value='';itemF.codeofValue='';openLov(itemF.para_desc,itemF.para_desc,itemF.dependent_row,itemF.dependent_row_logic, itemF.item_help_property)" ng-readonly="true" ng-required="itemF.nullable=='F'" ng-change="dependent_nullable_logic(itemF.value,itemF.column_name)">
                                            </label>
                                                <p ng-if="itemF.itemSelected">{{itemF.itemSelected}} item are selected</p>
                                            </div>

                                            <div ng-switch-when="T" ng-hide="itemF.entry_by_user=='F'">
                                                <span class="input-label add-new-entry-label"><b>{{itemF.para_desc}}</b></span>
                                                <label class="item item-input">
                                                <input type="text" name="{{itemF.column_name}}{{$index}}" placeholder="{{itemF.tool_tip}}" ng-model="itemF.value" id="{{itemF.column_name}}" ng-readonly="itemF.entry_by_user== 'R'" ng-required="itemF.nullable=='F'" ng-maxlength="itemF.column_size" ng-change="dependent_nullable_logic(itemF.value,itemF.column_name)">
                                            </label>
                                                <p ng-show="frm.{{itemF.column_name}}{{$index}}.$invalid && !frm.{{itemF.column_name}}{{$index}}.$pristine" class="help-block">
                                                    <span ng-show="frm.{{itemF.column_name}}{{$index}}.$error.required">
                                        Please Enter {{itemF.para_desc}}...
                                    </span>
                                                    <span ng-show="frm.{{itemF.column_name}}{{$index}}.$error.maxlength">
                                        {{itemF.para_desc}} max {{itemF.column_size}} Character...
                                    </span>
                                                    <span ng-show="frm.{{itemF.column_name}}{{$index}}.$error.minlength">
                                        {{itemF.para_desc}}  min 3 Character...
                                    </span>
                                                </p>
                                            </div>
                                            <div ng-switch-when="C" ng-hide="itemF.entry_by_user=='F'">
                                                <span class="input-label add-new-entry-label"><b>{{itemF.para_desc}}</b></span>

                                                <div ng-if="!itemF.disable" class="item item-icon-left" id="{{itemF.column_name}}" ion-datetime-picker date ng-model="itemF.value" ng-disabled="itemF.disable" ng-change="toggleRadio(itemF.para_desc,itemF.para_desc,itemF.dependent_row);" ng-required="itemF.nullable=='F'"
                                                    name="{{itemF.column_name}}{{$index}}" only-valid="{'between': {'initial': itemF.from_value, 'final': itemF.to_value}, 'inclusive': true}" ng-readonly="itemF.disable">
                                                    <!--<i class="icon ion-ios-calendar positive">-->
                                                    <i ng-class="{'icon  ion-ios-calendar positive': !itemF.nullable=='F' || itemF.value, 'icon ion-ios-calendar assertive': itemF.nullable=='F' && !itemF.value}">
                                        &nbsp;&nbsp;<p>{{itemF.value| date: "dd-MM-yyyy"}}</p>
                                    <p ng-show="frm.{{itemF.column_name}}{{$index}}.$error.required">{{itemF.tool_tip}}<p></i>
                                                </div>
                                                <div ng-if="itemF.disable" class="item item-icon-left" id="{{itemF.column_name}}" ng-model="itemF.value" ng-disabled="itemF.disable" ng-change="toggleRadio(itemF.para_desc,itemF.para_desc,itemF.dependent_row);" name="{{itemF.column_name}}{{$index}}" only-valid="{'between': {'initial': itemF.from_value, 'final': itemF.to_value}, 'inclusive': true}"
                                                    ng-readonly="itemF.disable">
                                                    <!--<i class="icon ion-ios-calendar positive">-->
                                                    <i class="icon  ion-ios-calendar positive" ng-disabled="true">
                                        &nbsp;&nbsp;<p>{{itemF.value| date: "dd-MM-yyyy"}}</p>
                                    <p ng-show="frm.{{itemF.column_name}}{{$index}}.$error.required">{{itemF.tool_tip}}<p></i>
                                                </div>
                    
                                            </div>
                                            <div ng-switch-when="D" ng-hide="itemF.entry_by_user=='F' ">
                                                <div class="add-new-entry-label ">
                                                    <label><b>{{itemF.para_desc}}</b></label>
                                                </div>
                                                <div class="col Dispenser-Entry-container">
                                                    <select ng-model="itemF.value " ng-disabled="itemF.entry_by_user=='R' " id="{{itemF.column_name}}" class="Dispenser-Entry-container-dropdown" ng-required="itemF.nullable=='F' " style="width:100%; " ng-change="dependent_nullable_logic(itemF.value)">
                                                    <option ng-repeat="option in itemF.dropdownVal track by $index " value="{{option}} ">{{option}}</option>
                                                </select>
                                                </div>
                                            </div>

                                            <div ng-switch-when="N" ng-hide="itemF.entry_by_user=='F' ">
                                                <span class="input-label add-new-entry-label "><b>{{itemF.para_desc}}</b></span>
                                                <label class="item item-input ">
                                                <input type="tel" valid-number decimaldigit="item.decimal_digit" name="{{itemF.column_name}}{{$index}} " placeholder="{{itemF.tool_tip}} " ng-model="itemF.value " id="{{itemF.column_name}}" ng-required="itemF.nullable=='F' " ng-maxlength="itemF.column_size" ng-change="autoCalculation(itemF.column_name)" ng-readonly="itemF.entry_by_user=='R' " ng-min="itemF.from_value " ng-max="itemF.to_value ">
                                            </label>

                                                <!-- onchange="checkFromToValue(itemF.value, itemF.from_value, itemF.to_value) " 
                                    ng-maxlength="itemF.to_value "
                                        ng-minlength="itemF.from_value " -->
                                                <p ng-show="frm.{{itemF.column_name}}{{$index}}.$invalid && 
                                !frm.{{itemF.column_name}}{{$index}}.$pristine " class="help-block ">
                                                    <span ng-show="frm.{{itemF.column_name}}{{$index}}.$error.required ">
                                        Please Enter {{itemF.column_desc}}...
                                    </span>
                                                    <span ng-show="frm.{{itemF.column_name}}{{$index}}.$error.maxlength ">
                                        {{itemF.column_desc}} max {{itemF.column_size}} digit...
                                    </span>
                                                    <span ng-show="frm.{{itemF.column_name}}{{$index}}.$error.minlength ">
                                        {{itemF.column_desc}}  min {{itemF.column_size}} digit...
                                    </span>
                                                </p>
                                            </div>

                                        </div>
                                    </div>
                                    <div style="padding:0 5%">
                                        <button class="button button-block button-small button-balanced" ng-disabled="frm.$invalid">
                                        Refresh
                                    </button>
                                    </div>

                                </div>
                            </form>
                        </div>
                    </div>
                    <!--                
                <div class="row">
                    <div class="col col-100" ng-if="showSummaryTabFlag==1">
                        <div class="list card short-report-details-wrapper" ng-init="item.status = true">
                            <div class="short-report-details-heading">
                                <i class="icon ion-plus-round short-report-tab-icon" ng-click="item.status=!item.status"></i>
                                <h2 ng-click="refreshSummaryValue(item.seq_no,item.tab)">{{item.lastupdate}}</h2>
                            </div>
                            <div class="slide-toggle short-report-details-tab" ng-show="item.status">
                                <p><b>{{item.first_screen_1_value}}</b> </p>
                                <ion-spinner icon="bubbles" class="spinner-positive short-report-details-tab-preloder" ng-show="shortReportProcess"></ion-spinner>
                            </div>
                        </div>
                    </div>

                </div>-->

                </div>
            </div>
            <div class="clr"></div>
    </ion-content>

</ion-view>